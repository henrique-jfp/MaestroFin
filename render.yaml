# üé® Render Deploy Configuration
# Arquitetura de Servi√ßos Web + Worker para estabilidade m√°xima.

services:
  # --- Servi√ßo Web: Dashboard com Gunicorn ---
  - type: web
    name: maestrofin-dashboard
    env: python
    plan: free
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn --config gunicorn_config.py web_launcher:app
    healthCheckPath: /
    envVars:
      - key: PYTHON_VERSION
        value: 3.12.7
      - key: PYTHONUNBUFFERED
        value: 1
      - key: PYTHONDONTWRITEBYTECODE
        value: 1
      - key: RENDER_DEPLOY
        value: "true"
      # Adicione suas vari√°veis de ambiente aqui (ser√£o compartilhadas com o bot)
      # - key: TELEGRAM_TOKEN
      #   fromSecret: true
      # - key: GEMINI_API_KEY
      #   fromSecret: true
      # - key: DATABASE_URL
      #   fromSecret: true
      # - key: GOOGLE_VISION_CREDENTIALS_JSON
      #   fromSecret: true

  # --- Servi√ßo Worker: Bot do Telegram ---
  - type: worker
    name: maestrofin-bot
    env: python
    plan: free
    buildCommand: pip install -r requirements.txt
    startCommand: python bot.py
    envVars:
      - key: PYTHON_VERSION
        value: 3.12.7
      - key: PYTHONUNBUFFERED
        value: 1
      - key: PYTHONDONTWRITEBYTECODE
        value: 1
      - key: RENDER_DEPLOY
        value: "true"
