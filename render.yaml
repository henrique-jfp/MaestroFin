# üé® Render Deploy Configuration
# Arquitetura de Servi√ßos Web + Worker para estabilidade m√°xima.

services:
  # --- Servi√ßo Principal: Auto-detecta Web ou Worker ---
  - type: web
    name: maestrofin
    env: python
    plan: free
    buildCommand: pip install -r requirements.txt
    startCommand: python unified_launcher.py
    healthCheckPath: /
    envVars:
      - key: PYTHON_VERSION
        value: 3.12.7
      - key: PYTHONUNBUFFERED
        value: 1
      - key: PYTHONDONTWRITEBYTECODE
        value: 1
      - key: RENDER_DEPLOY
        value: "true"
      - key: MAESTROFIN_MODE
        value: "web"  # "web" para dashboard, "bot" para worker
      # Adicione suas vari√°veis de ambiente aqui
      # - key: TELEGRAM_TOKEN
      #   fromSecret: true
      # - key: GEMINI_API_KEY
      #   fromSecret: true
      # - key: DATABASE_URL
      #   fromSecret: true
      # - key: GOOGLE_VISION_CREDENTIALS_JSON
      #   fromSecret: true

  # --- Worker Service: Bot do Telegram ---
  - type: worker
    name: maestrofin-bot
    env: python
    plan: free
    buildCommand: pip install -r requirements.txt
    startCommand: python bot.py
    envVars:
      - key: PYTHON_VERSION
        value: 3.12.7
      - key: PYTHONUNBUFFERED
        value: 1
      - key: PYTHONDONTWRITEBYTECODE
        value: 1
      - key: RENDER_DEPLOY
        value: "true"
      - key: MAESTROFIN_MODE
        value: "bot"
